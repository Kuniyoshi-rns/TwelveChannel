<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ホーム</title>
    <link href="" rel="stylesheet">
    <link href="/css/unten.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>
<th:block th:insert="common/header"></th:block>
<div>
    <hr>

    <div class="top-btn">
        <form class="search" method="get" action="/home">
            <select name="order">
                <option>並び替え</option>
                <option>新しい順</option>
                <option>古い順</option>
            </select>
            <div>
                <input class="search-box" type="text" name="keyword" size="25" placeholder="キーワード検索">
                <input class="search-btn blue" type="submit" value="検索">
            </div>
        </form>
        <button class="home-btn blue" id="add-thread">新規投稿</button>
    </div>

    <div class="scrollbar">
        <div th:each="thread:${threads}">
            <p>No.<span th:text="${thread.id}"></span></p>
            <p>
                <a th:href="@{/thread/{thread_id} (thread_id=${thread.id})}" th:text="${thread.thread_title}" class="home-title"></a>
                -
                <span th:each="tag:${tags}">
                    <a th:href="@{/home?tag={tag} (tag=${tag.tag})}" th:text="'#'+${tag.tag}" th:if="${thread.id==tag.thread_id}"></a>
                </span>
            </p>

            <div class="like-comment">

            <div th:each="count:${comment_count}" class="home-comment">
                <p th:if="${thread.id==count.thread_id}">コメント:<span th:text="${count.count}"></span></p>
            </div>

            <div th:each="favorite:${favorites}">
                <p th:if="${thread.id==favorite.thread_id}">いいね:<span th:text="${favorite.count}"></span></p>
            </div>

            </div>

            <hr>
        </div>
    </div>


    <div class="pagination">
        <a th:href="@{/home?offset={offset}&order={order}&keyword={keyword}&tag={tag} (offset=${offset-5},order=${order},keyword=${keyword},tag=${tag})}" th:if="${offset>=5}">次へ</a>
        <p><span th:text="${thread_page}"></span>/<span th:text="${thread_all}"></span>ページ</p>
        <a th:href="@{/home?offset={offset}&order={order}&keyword={keyword}&tag={tag} (offset=${offset+5},order=${order},keyword=${keyword},tag=${tag})}" th:if="${thread_page<thread_all}">前へ</a>
    </div>

    <script>
        'use strict'

        document.getElementById('myPage').addEventListener('click', () => {
          location.href = './mypage'
        })

        document.getElementById('logout').addEventListener('click', () => {
          location.href = './logout'
        })

        document.getElementById('add-thread').addEventListener('click', () => {
          location.href = './add-thread'
        })
    </script>
</div>
</body>
</html>